[project]
name = "micropython-uncrustify"
version = "1.0.0-post.1"
readme = "README_MP.md"

[project.urls]
Homepage = "https://github.com/dlech/micropython-uncrustify"

[build-system]
requires = [
  "setuptools>=42",
  "scikit-build",
  "cmake",
  "ninja; platform_system!='Windows'"
]
build-backend = "setuptools.build_meta"

[tool.cibuildwheel]
before-build = "pip install -r requirements-repair.txt"
repair-wheel-command = "python scripts/repair_wheel.py -w {dest_dir} {wheel}"

# HACK: causes distutils to return the proper platform name so that scikit-build
# will not use the same build directory as the host platform build.
[[tool.cibuildwheel.overrides]]
select = "*-win_arm64"
environment = "VSCMD_ARG_TGT_ARCH=arm64"
