import{r as s,u as F,an as G,bc as y,j as a,B as r,I as N,df as O}from"./index-86768d23.js";import{I as m}from"./index-9a10118c.js";import{I as A}from"./input-13e7a0de.js";import{L as c,T as B}from"./textarea-04e722a8.js";function E(p){return p.sort((o,n)=>o.localeCompare(n))}function H({children:p}){const[o,n]=s.useState(""),[u,b]=s.useState(""),[f,x]=s.useState("Generic"),[h,v]=s.useState([]),[S,j]=s.useState(!1),C=F(e=>e.setErrorData),g=G(e=>e.ComponentFields),w=new Set(Object.keys(y(e=>e.unavaliableFields))),V=()=>{const e=Array.from(g).filter(t=>!w.has(t));return E(e)},I=y(e=>e.addGlobalVariable);function T(){O({name:o,type:f,value:u,default_fields:h}).then(t=>{const{name:l,id:i,type:d}=t.data;I(l,i,d,h),n(""),b(""),x(""),v([]),j(!1)}).catch(t=>{var i,d;let l=t;C({title:"Error creating variable",list:[((d=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:d.detail)??"Unknown error"]})})}return a.jsxs(r,{open:S,setOpen:j,size:"x-small",onSubmit:T,children:[a.jsxs(r.Header,{description:"This variable will be encrypted and will be available for you to use in any of your projects.",children:[a.jsx("span",{className:"pr-2",children:" Create Variable "}),a.jsx(N,{name:"Globe",className:"h-6 w-6 pl-1 text-primary ","aria-hidden":"true"})]}),a.jsx(r.Trigger,{children:p}),a.jsx(r.Content,{children:a.jsxs("div",{className:"flex h-full w-full flex-col gap-4 align-middle",children:[a.jsx(c,{children:"Variable Name"}),a.jsx(A,{value:o,onChange:e=>{n(e.target.value)},placeholder:"Insert a name for the variable..."}),a.jsx(c,{children:"Type (optional)"}),a.jsx(m,{setSelectedOption:e=>{x(e)},selectedOption:f,password:!1,options:["Generic","Credential"],placeholder:"Choose a type for the variable...",id:"type-global-variables"}),a.jsx(c,{children:"Value"}),f==="Credential"?a.jsx(m,{password:!0,value:u,onChange:e=>{b(e)},placeholder:"Insert a value for the variable..."}):a.jsx(B,{value:u,onChange:e=>{b(e.target.value)},placeholder:"Insert a value for the variable...",className:"w-full resize-none custom-scroll"}),a.jsx(c,{children:"Apply To Fields (optional)"}),a.jsx(m,{setSelectedOptions:e=>v(e),selectedOptions:h,options:V(),password:!1,placeholder:"Choose a field for the variable...",id:"apply-to-fields"})]})}),a.jsx(r.Footer,{submit:{label:"Save Variable",dataTestId:"save-variable-btn"}})]})}export{H as A};
