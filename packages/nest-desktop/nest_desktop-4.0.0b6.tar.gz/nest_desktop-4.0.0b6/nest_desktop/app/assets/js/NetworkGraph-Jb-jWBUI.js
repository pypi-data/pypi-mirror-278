import{_ as x}from"./NodeMenu-B8Zq9kuO.js";import{d as M,P as g,bg as G,b3 as N,aV as b,a$ as B,o as t,c as r,a as V,w as C,f as E,t as S,cg as W,s as e,n as H,v as a,F as $,r as z,aY as w,dM as F}from"./index-DTm3q99n.js";import{u as P}from"./networkGraphStore-D4UVvxWH.js";const R={style:{width:"100%",height:"100%"}},T={style:{width:"320px"}},Y=e("rect",{height:"100%",id:"workspaceHandler",width:"100%"},null,-1),A={id:"networkWorkspace"},D=e("g",{class:"grid no-print"},null,-1),U={id:"network"},X=["id"],j={key:0,d:"M10,2L14,4L10,6",fill:"transparent",stroke:"currentcolor"},q={key:1,fill:"currentcolor",r:"2",stroke:"currentcolor",transform:"translate(12,4)"},I={key:2,d:"M10,2L14,4L10,6L10,2L14,4",fill:"currentcolor",stroke:"currentcolor"},J={key:3,fill:"transparent",r:"4",stroke:"currentcolor",transform:"translate(5,5)"},K=e("text",{dx:"8",dy:"5"},null,-1),O={class:"dragline"},Q=e("g",{id:"nodeGroups"},null,-1),Z=e("g",{id:"connections"},null,-1),ee=e("g",{id:"nodes"},null,-1),te=e("g",{id:"nodeAddPanel"},null,-1),ae=M({__name:"NetworkGraph",props:{network:{}},setup(v){const l=P(),y=v,L=g(()=>y.network),s=g(()=>l.state.graph),d=G(null);return N(()=>{b(()=>{l.mount(new F(d,L.value))})}),B(()=>{l.unmount()}),(oe,i)=>{var c,u,h,k,_,p,f,m;return t(),r("div",R,[V(W,{onClick:i[0]||(i[0]=o=>{var n;return(n=s.value)==null?void 0:n.updateHash()}),size:"small",variant:"text"},{default:C(()=>{var o;return[E(S((o=s.value)==null?void 0:o.hash),1)]}),_:1}),e("div",T,[(c=s.value)!=null&&c.state.nodeMenu.node?(t(),H(x,{key:0,"model-value":(u=s.value)==null?void 0:u.state.nodeMenu.open,node:(h=s.value)==null?void 0:h.state.nodeMenu.node,offset:(k=s.value)==null?void 0:k.state.nodeMenu.offset},null,8,["model-value","node","offset"])):a("",!0)]),(t(),r("svg",{class:"networkGraph",height:"100%",ref_key:"networkGraphRef",ref:d,width:"100%"},[Y,e("g",A,[D,e("g",U,[(t(),r("g",{key:(_=s.value)==null?void 0:_.network.connections.all.length,class:"synMarker"},[(t(!0),r($,null,z((p=s.value)==null?void 0:p.network.connections.all,(o,n)=>(t(),r("defs",{key:"defs"+n,style:w({color:"var(--node"+o.source.idx+"-color)"})},[(t(),r("marker",{key:o.hash,id:"syn-"+n,markerHeight:"8",markerWidth:"16",orient:"auto",refX:"14",refY:"4"},[o.view.markerEndLabel==="generic"?(t(),r("path",j)):a("",!0),o.view.markerEndLabel==="inh"?(t(),r("circle",q)):a("",!0),o.view.markerEndLabel==="exc"?(t(),r("path",I)):a("",!0),o.view.markerEndLabel==="assigned"?(t(),r("circle",J)):a("",!0),K],8,X))],4))),128))])),e("g",O,[e("path",{style:w({strokeWidth:(m=(f=s.value)==null?void 0:f.config)==null?void 0:m.localStorage.strokeWidth}),d:"M0,0L0,0",fill:"none"},null,4)]),Q,Z,ee]),te])],512))])}}});export{ae as _};
