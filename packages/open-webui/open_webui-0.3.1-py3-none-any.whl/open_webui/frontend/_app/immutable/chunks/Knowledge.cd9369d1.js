import{s as ue,w as Q,P as fe,o as pe,E as ge,F as we,G as be,H as ke,f as k,g as $,h as _,d as c,j as i,i as A,e as re,K as de,l as N,m as q,r as h,n as j,C as X,a as T,c as z,z as I,A as M,p as $e,R as Y,W as ye,u as xe}from"./scheduler.8ceb707f.js";import{S as he,i as _e,b as P,d as R,m as W,a as L,t as S,e as J,g as me,c as ve,f as Ee}from"./index.552978e5.js";import{e as G}from"./each.15ac4e72.js";import"./updater.e153cbf1.js";import{D as De,M as Ve}from"./Dropdown.4f0533e0.js";import{M as Ce}from"./menu-trigger.1e780b67.js";import{q as Ae}from"./index.e7656f3a.js";import{f as Ie}from"./index.e8e699b3.js";function se(o,e,n){const l=o.slice();return l[10]=e[n],l}function Me(o){let e;const n=o[5].default,l=ge(n,o,o[8],null);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,r){l&&l.m(t,r),e=!0},p(t,r){l&&l.p&&(!e||r&256)&&we(l,n,t,t[8],e?ke(n,t[8],r,null):be(t[8]),null)},i(t){e||(L(l,t),e=!0)},o(t){S(l,t),e=!1},d(t){l&&l.d(t)}}}function He(o){let e,n,l=G(o[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=oe(se(o,l,s));const r=s=>S(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=re()},l(s){for(let u=0;u<t.length;u+=1)t[u].l(s);e=re()},m(s,u){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(s,u);A(s,e,u),n=!0},p(s,u){if(u&5){l=G(s[2]);let a;for(a=0;a<l.length;a+=1){const m=se(s,l,a);t[a]?(t[a].p(m,u),L(t[a],1)):(t[a]=oe(m),t[a].c(),L(t[a],1),t[a].m(e.parentNode,e))}for(me(),a=l.length;a<t.length;a+=1)r(a);ve()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)L(t[u]);n=!0}},o(s){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)S(t[u]);n=!1},d(s){s&&c(e),de(t,s)}}}function Ze(o){let e,n=o[3].t("No documents found")+"",l;return{c(){e=k("div"),l=N(n),this.h()},l(t){e=$(t,"DIV",{class:!0});var r=_(e);l=q(r,n),r.forEach(c),this.h()},h(){i(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(t,r){A(t,e,r),h(e,l)},p(t,r){r&8&&n!==(n=t[3].t("No documents found")+"")&&j(l,n)},i:X,o:X,d(t){t&&c(e)}}}function Be(o){let e,n,l;return{c(){e=I("svg"),n=I("path"),l=I("path"),this.h()},l(t){e=M(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);n=M(r,"path",{d:!0}),_(n).forEach(c),l=M(r,"path",{d:!0}),_(l).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),i(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-4")},m(t,r){A(t,e,r),h(e,n),h(e,l)},d(t){t&&c(e)}}}function Te(o){let e,n,l;return{c(){e=I("svg"),n=I("path"),l=I("path"),this.h()},l(t){e=M(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);n=M(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(n).forEach(c),l=M(r,"path",{d:!0}),_(l).forEach(c),r.forEach(c),this.h()},h(){i(n,"fill-rule","evenodd"),i(n,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),i(n,"clip-rule","evenodd"),i(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","w-4")},m(t,r){A(t,e,r),h(e,n),h(e,l)},d(t){t&&c(e)}}}function ze(o){var b;let e,n,l,t,r,s=(((b=o[10])==null?void 0:b.type)??"Document")+"",u,a,m,p=o[10].name+"",V,D;function d(g,x){var v;if((((v=g[10])==null?void 0:v.type)??"doc")==="doc")return Te;if(g[10].type==="collection")return Be}let w=d(o),f=w&&w(o);return{c(){e=k("div"),f&&f.c(),n=T(),l=k("div"),t=k("div"),r=k("div"),u=N(s),a=T(),m=k("div"),V=N(p),D=T(),this.h()},l(g){e=$(g,"DIV",{class:!0});var x=_(e);f&&f.l(x),x.forEach(c),n=z(g),l=$(g,"DIV",{class:!0});var v=_(l);t=$(v,"DIV",{class:!0});var y=_(t);r=$(y,"DIV",{class:!0});var C=_(r);u=q(C,s),C.forEach(c),a=z(y),m=$(y,"DIV",{class:!0});var E=_(m);V=q(E,p),E.forEach(c),y.forEach(c),v.forEach(c),D=z(g),this.h()},h(){i(e,"class","flex self-start"),i(r,"class","w-fit text-xs font-black px-1 rounded uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200"),i(m,"class","line-clamp-1 font-medium pr-0.5"),i(t,"class","flex flex-col"),i(l,"class","flex items-center")},m(g,x){A(g,e,x),f&&f.m(e,null),A(g,n,x),A(g,l,x),h(l,t),h(t,r),h(r,u),h(t,a),h(t,m),h(m,V),A(g,D,x)},p(g,x){var v;w!==(w=d(g))&&(f&&f.d(1),f=w&&w(g),f&&(f.c(),f.m(e,null))),x&4&&s!==(s=(((v=g[10])==null?void 0:v.type)??"Document")+"")&&j(u,s),x&4&&p!==(p=g[10].name+"")&&j(V,p)},d(g){g&&(c(e),c(n),c(l),c(D)),f&&f.d()}}}function oe(o){let e,n;function l(){return o[6](o[10])}return e=new Ve({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ze]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){P(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){W(e,t,r),n=!0},p(t,r){o=t;const s={};r&260&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Le(o){let e,n,l,t;const r=[Ze,He],s=[];function u(a,m){return a[2].length===0?0:1}return n=u(o),l=s[n]=r[n](o),{c(){e=k("div"),l.c(),this.h()},l(a){e=$(a,"DIV",{class:!0});var m=_(e);l.l(m),m.forEach(c),this.h()},h(){i(e,"class","max-h-[10rem] overflow-y-scroll")},m(a,m){A(a,e,m),s[n].m(e,null),t=!0},p(a,m){let p=n;n=u(a),n===p?s[n].p(a,m):(me(),S(s[p],1,1,()=>{s[p]=null}),ve(),l=s[n],l?l.p(a,m):(l=s[n]=r[n](a),l.c()),L(l,1),l.m(e,null))},i(a){t||(L(l),t=!0)},o(a){S(l),t=!1},d(a){a&&c(e),s[n].d()}}}function Se(o){let e,n,l;return n=new Ce({props:{class:"w-full max-w-[300px]  rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:Ie,$$slots:{default:[Le]},$$scope:{ctx:o}}}),{c(){e=k("div"),P(n.$$.fragment),this.h()},l(t){e=$(t,"DIV",{slot:!0});var r=_(e);R(n.$$.fragment,r),r.forEach(c),this.h()},h(){i(e,"slot","content")},m(t,r){A(t,e,r),W(n,e,null),l=!0},p(t,r){const s={};r&269&&(s.$$scope={dirty:r,ctx:t}),n.$set(s)},i(t){l||(L(n.$$.fragment,t),l=!0)},o(t){S(n.$$.fragment,t),l=!1},d(t){t&&c(e),J(n)}}}function Ke(o){let e,n;return e=new De({props:{$$slots:{content:[Se],default:[Me]},$$scope:{ctx:o}}}),e.$on("change",o[7]),{c(){P(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,t){W(e,l,t),n=!0},p(l,[t]){const r={};t&269&&(r.$$scope={dirty:t,ctx:l}),e.$set(r)},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}function Ne(o,e,n){let l,t;Q(o,Ae,d=>n(9,l=d));let{$$slots:r={},$$scope:s}=e;const u=fe("i18n");Q(o,u,d=>n(3,t=d));let{onClose:a=()=>{}}=e,{knowledge:m=[]}=e,p=[];pe(()=>{let d=[...l.length>0?[{name:"All Documents",type:"collection",title:t.t("All Documents"),collection_names:l.map(w=>w.collection_name)}]:[],...l.reduce((w,f,b,g)=>{var x;return[...new Set([...w,...(((x=f==null?void 0:f.content)==null?void 0:x.tags)??[]).map(v=>v.name)])]},[]).map(w=>({name:w,type:"collection",collection_names:l.filter(f=>{var b;return(((b=f==null?void 0:f.content)==null?void 0:b.tags)??[]).map(g=>g.name).includes(w)}).map(f=>f.collection_name)}))];n(2,p=[...d,...l])});const V=d=>{m.find(w=>w.name===d.name)||n(0,m=[...m,{...d,type:(d==null?void 0:d.type)??"doc"}])},D=d=>{d.detail===!1&&a()};return o.$$set=d=>{"onClose"in d&&n(1,a=d.onClose),"knowledge"in d&&n(0,m=d.knowledge),"$$scope"in d&&n(8,s=d.$$scope)},[m,a,p,t,u,r,V,D,s]}class qe extends he{constructor(e){super(),_e(this,e,Ne,Ke,ue,{onClose:1,knowledge:0})}}function ae(o,e,n){const l=o.slice();return l[5]=e[n],l[7]=n,l}function ie(o){let e,n=G(o[0]),l=[];for(let t=0;t<n.length;t+=1)l[t]=ce(ae(o,n,t));return{c(){e=k("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=$(t,"DIV",{class:!0});var r=_(e);for(let s=0;s<l.length;s+=1)l[s].l(r);r.forEach(c),this.h()},h(){i(e,"class","flex items-center gap-2 mt-2")},m(t,r){A(t,e,r);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,r){if(r&3){n=G(t[0]);let s;for(s=0;s<n.length;s+=1){const u=ae(t,n,s);l[s]?l[s].p(u,r):(l[s]=ce(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&c(e),de(l,t)}}}function je(o){let e,n,l;return{c(){e=I("svg"),n=I("path"),l=I("path"),this.h()},l(t){e=M(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);n=M(r,"path",{d:!0}),_(n).forEach(c),l=M(r,"path",{d:!0}),_(l).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),i(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-6")},m(t,r){A(t,e,r),h(e,n),h(e,l)},d(t){t&&c(e)}}}function Oe(o){let e,n,l;return{c(){e=I("svg"),n=I("path"),l=I("path"),this.h()},l(t){e=M(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=_(e);n=M(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(n).forEach(c),l=M(r,"path",{d:!0}),_(l).forEach(c),r.forEach(c),this.h()},h(){i(n,"fill-rule","evenodd"),i(n,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),i(n,"clip-rule","evenodd"),i(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-6")},m(t,r){A(t,e,r),h(e,n),h(e,l)},d(t){t&&c(e)}}}function ce(o){var O,ee;let e,n,l,t,r,s,u=(((O=o[5])==null?void 0:O.title)??`#${o[5].name}`)+"",a,m,p,V=o[1].t(((ee=o[5])==null?void 0:ee.type)??"Document")+"",D,d,w,f,b='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',g,x,v;function y(Z,H){var B;if((((B=Z[5])==null?void 0:B.type)??"doc")==="doc")return Oe;if(Z[5].type==="collection")return je}let C=y(o),E=C&&C(o);function K(){return o[3](o[7])}return{c(){e=k("div"),n=k("div"),l=k("div"),E&&E.c(),t=T(),r=k("div"),s=k("div"),a=N(u),m=T(),p=k("div"),D=N(V),d=T(),w=k("div"),f=k("button"),f.innerHTML=b,g=T(),this.h()},l(Z){e=$(Z,"DIV",{class:!0});var H=_(e);n=$(H,"DIV",{class:!0});var B=_(n);l=$(B,"DIV",{class:!0});var U=_(l);E&&E.l(U),U.forEach(c),t=z(B),r=$(B,"DIV",{class:!0});var F=_(r);s=$(F,"DIV",{class:!0});var te=_(s);a=q(te,u),te.forEach(c),m=z(F),p=$(F,"DIV",{class:!0});var le=_(p);D=q(le,V),le.forEach(c),F.forEach(c),B.forEach(c),d=z(H),w=$(H,"DIV",{class:!0});var ne=_(w);f=$(ne,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Y(f)!=="svelte-v6mhqq"&&(f.innerHTML=b),ne.forEach(c),g=z(H),H.forEach(c),this.h()},h(){i(l,"class","p-2.5 bg-red-400 text-white rounded-lg"),i(s,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),i(p,"class","text-gray-500 text-sm"),i(r,"class","flex flex-col justify-center -space-y-0.5"),i(n,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none"),i(f,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),i(f,"type","button"),i(w,"class","absolute -top-1 -right-1"),i(e,"class","relative group")},m(Z,H){A(Z,e,H),h(e,n),h(n,l),E&&E.m(l,null),h(n,t),h(n,r),h(r,s),h(s,a),h(r,m),h(r,p),h(p,D),h(e,d),h(e,w),h(w,f),h(e,g),x||(v=xe(f,"click",K),x=!0)},p(Z,H){var B,U;o=Z,C!==(C=y(o))&&(E&&E.d(1),E=C&&C(o),E&&(E.c(),E.m(l,null))),H&1&&u!==(u=(((B=o[5])==null?void 0:B.title)??`#${o[5].name}`)+"")&&j(a,u),H&3&&V!==(V=o[1].t(((U=o[5])==null?void 0:U.type)??"Document")+"")&&j(D,V)},d(Z){Z&&c(e),E&&E.d(),x=!1,v()}}}function Ue(o){let e,n="Select Documents";return{c(){e=k("button"),e.textContent=n,this.h()},l(l){e=$(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Y(e)!=="svelte-178uus6"&&(e.textContent=n),this.h()},h(){i(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl"),i(e,"type","button")},m(l,t){A(l,e,t)},p:X,d(l){l&&c(e)}}}function Fe(o){let e,n,l,t=o[1].t("Knowledge")+"",r,s,u,a='To add documents here, upload them to the "Documents" workspace first.',m,p,V,D,d,w,f,b=o[0].length>0&&ie(o);function g(v){o[4](v)}let x={$$slots:{default:[Ue]},$$scope:{ctx:o}};return o[0]!==void 0&&(x.knowledge=o[0]),d=new qe({props:x}),$e.push(()=>Ee(d,"knowledge",g)),{c(){e=k("div"),n=k("div"),l=k("div"),r=N(t),s=T(),u=k("div"),u.textContent=a,m=T(),p=k("div"),b&&b.c(),V=T(),D=k("div"),P(d.$$.fragment),this.h()},l(v){e=$(v,"DIV",{});var y=_(e);n=$(y,"DIV",{class:!0});var C=_(n);l=$(C,"DIV",{class:!0});var E=_(l);r=q(E,t),E.forEach(c),C.forEach(c),s=z(y),u=$(y,"DIV",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-ew37r6"&&(u.textContent=a),m=z(y),p=$(y,"DIV",{class:!0});var K=_(p);b&&b.l(K),V=z(K),D=$(K,"DIV",{class:!0});var O=_(D);R(d.$$.fragment,O),O.forEach(c),K.forEach(c),y.forEach(c),this.h()},h(){i(l,"class","self-center text-sm font-semibold"),i(n,"class","flex w-full justify-between mb-1"),i(u,"class","text-xs dark:text-gray-500"),i(D,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),i(p,"class","flex flex-col")},m(v,y){A(v,e,y),h(e,n),h(n,l),h(l,r),h(e,s),h(e,u),h(e,m),h(e,p),b&&b.m(p,null),h(p,V),h(p,D),W(d,D,null),f=!0},p(v,[y]){(!f||y&2)&&t!==(t=v[1].t("Knowledge")+"")&&j(r,t),v[0].length>0?b?b.p(v,y):(b=ie(v),b.c(),b.m(p,V)):b&&(b.d(1),b=null);const C={};y&256&&(C.$$scope={dirty:y,ctx:v}),!w&&y&1&&(w=!0,C.knowledge=v[0],ye(()=>w=!1)),d.$set(C)},i(v){f||(L(d.$$.fragment,v),f=!0)},o(v){S(d.$$.fragment,v),f=!1},d(v){v&&c(e),b&&b.d(),J(d)}}}function Ge(o,e,n){let l,{knowledge:t=[]}=e;const r=fe("i18n");Q(o,r,a=>n(1,l=a));const s=a=>{t.splice(a,1),n(0,t)};function u(a){t=a,n(0,t)}return o.$$set=a=>{"knowledge"in a&&n(0,t=a.knowledge)},[t,l,r,s,u]}class tt extends he{constructor(e){super(),_e(this,e,Ge,Fe,ue,{knowledge:0})}}export{tt as K};
//# sourceMappingURL=Knowledge.cd9369d1.js.map
