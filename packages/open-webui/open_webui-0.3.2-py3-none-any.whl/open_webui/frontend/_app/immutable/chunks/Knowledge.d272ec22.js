import{s as ce,w as X,P as ue,o as ve,E as pe,F as ge,G as we,H as be,f as k,g as $,h as _,d as c,j as i,i as I,e as le,K as fe,l as K,m as N,r as d,n as q,C as re,a as T,c as S,z as C,A as H,p as ke,W as $e,R as ye,u as Ee}from"./scheduler.8ceb707f.js";import{S as de,i as he,b as R,d as W,m as J,a as z,t as L,e as Q,g as _e,c as me,f as De}from"./index.552978e5.js";import{e as P}from"./each.15ac4e72.js";import"./updater.e153cbf1.js";import{D as Ve,M as xe}from"./Dropdown.4f0533e0.js";import{M as Ae}from"./menu-trigger.1e780b67.js";import{q as Ie}from"./index.1355041b.js";import{f as Me}from"./index.e8e699b3.js";function ne(o,e,r){const l=o.slice();return l[10]=e[r],l}function Ce(o){let e;const r=o[5].default,l=pe(r,o,o[8],null);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,n){l&&l.m(t,n),e=!0},p(t,n){l&&l.p&&(!e||n&256)&&ge(l,r,t,t[8],e?be(r,t[8],n,null):we(t[8]),null)},i(t){e||(z(l,t),e=!0)},o(t){L(l,t),e=!1},d(t){l&&l.d(t)}}}function He(o){let e,r,l=P(o[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=se(ne(o,l,s));const n=s=>L(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=le()},l(s){for(let u=0;u<t.length;u+=1)t[u].l(s);e=le()},m(s,u){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(s,u);I(s,e,u),r=!0},p(s,u){if(u&5){l=P(s[2]);let a;for(a=0;a<l.length;a+=1){const v=ne(s,l,a);t[a]?(t[a].p(v,u),z(t[a],1)):(t[a]=se(v),t[a].c(),z(t[a],1),t[a].m(e.parentNode,e))}for(_e(),a=l.length;a<t.length;a+=1)n(a);me()}},i(s){if(!r){for(let u=0;u<l.length;u+=1)z(t[u]);r=!0}},o(s){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)L(t[u]);r=!1},d(s){s&&c(e),fe(t,s)}}}function Ze(o){let e,r=o[3].t("No documents found")+"",l;return{c(){e=k("div"),l=K(r),this.h()},l(t){e=$(t,"DIV",{class:!0});var n=_(e);l=N(n,r),n.forEach(c),this.h()},h(){i(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(t,n){I(t,e,n),d(e,l)},p(t,n){n&8&&r!==(r=t[3].t("No documents found")+"")&&q(l,r)},i:re,o:re,d(t){t&&c(e)}}}function Be(o){let e,r,l;return{c(){e=C("svg"),r=C("path"),l=C("path"),this.h()},l(t){e=H(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);r=H(n,"path",{d:!0}),_(r).forEach(c),l=H(n,"path",{d:!0}),_(l).forEach(c),n.forEach(c),this.h()},h(){i(r,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),i(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-4")},m(t,n){I(t,e,n),d(e,r),d(e,l)},d(t){t&&c(e)}}}function Te(o){let e,r,l;return{c(){e=C("svg"),r=C("path"),l=C("path"),this.h()},l(t){e=H(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);r=H(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(r).forEach(c),l=H(n,"path",{d:!0}),_(l).forEach(c),n.forEach(c),this.h()},h(){i(r,"fill-rule","evenodd"),i(r,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),i(r,"clip-rule","evenodd"),i(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","w-4")},m(t,n){I(t,e,n),d(e,r),d(e,l)},d(t){t&&c(e)}}}function Se(o){var x;let e,r,l,t,n,s=(((x=o[10])==null?void 0:x.type)??"Document")+"",u,a,v,y=o[10].name+"",E,V;function m(f,D){var A;if((((A=f[10])==null?void 0:A.type)??"doc")==="doc")return Te;if(f[10].type==="collection")return Be}let p=m(o),h=p&&p(o);return{c(){e=k("div"),h&&h.c(),r=T(),l=k("div"),t=k("div"),n=k("div"),u=K(s),a=T(),v=k("div"),E=K(y),V=T(),this.h()},l(f){e=$(f,"DIV",{class:!0});var D=_(e);h&&h.l(D),D.forEach(c),r=S(f),l=$(f,"DIV",{class:!0});var A=_(l);t=$(A,"DIV",{class:!0});var g=_(t);n=$(g,"DIV",{class:!0});var w=_(n);u=N(w,s),w.forEach(c),a=S(g),v=$(g,"DIV",{class:!0});var b=_(v);E=N(b,y),b.forEach(c),g.forEach(c),A.forEach(c),V=S(f),this.h()},h(){i(e,"class","flex self-start"),i(n,"class","w-fit text-xs font-black px-1 rounded uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200"),i(v,"class","line-clamp-1 font-medium pr-0.5"),i(t,"class","flex flex-col"),i(l,"class","flex items-center")},m(f,D){I(f,e,D),h&&h.m(e,null),I(f,r,D),I(f,l,D),d(l,t),d(t,n),d(n,u),d(t,a),d(t,v),d(v,E),I(f,V,D)},p(f,D){var A;p!==(p=m(f))&&(h&&h.d(1),h=p&&p(f),h&&(h.c(),h.m(e,null))),D&4&&s!==(s=(((A=f[10])==null?void 0:A.type)??"Document")+"")&&q(u,s),D&4&&y!==(y=f[10].name+"")&&q(E,y)},d(f){f&&(c(e),c(r),c(l),c(V)),h&&h.d()}}}function se(o){let e,r;function l(){return o[6](o[10])}return e=new xe({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Se]},$$scope:{ctx:o}}}),e.$on("click",l),{c(){R(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){J(e,t,n),r=!0},p(t,n){o=t;const s={};n&260&&(s.$$scope={dirty:n,ctx:o}),e.$set(s)},i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function ze(o){let e,r,l,t;const n=[Ze,He],s=[];function u(a,v){return a[2].length===0?0:1}return r=u(o),l=s[r]=n[r](o),{c(){e=k("div"),l.c(),this.h()},l(a){e=$(a,"DIV",{class:!0});var v=_(e);l.l(v),v.forEach(c),this.h()},h(){i(e,"class","max-h-[10rem] overflow-y-scroll")},m(a,v){I(a,e,v),s[r].m(e,null),t=!0},p(a,v){let y=r;r=u(a),r===y?s[r].p(a,v):(_e(),L(s[y],1,1,()=>{s[y]=null}),me(),l=s[r],l?l.p(a,v):(l=s[r]=n[r](a),l.c()),z(l,1),l.m(e,null))},i(a){t||(z(l),t=!0)},o(a){L(l),t=!1},d(a){a&&c(e),s[r].d()}}}function Le(o){let e,r,l;return r=new Ae({props:{class:"w-full max-w-[300px]  rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:Me,$$slots:{default:[ze]},$$scope:{ctx:o}}}),{c(){e=k("div"),R(r.$$.fragment),this.h()},l(t){e=$(t,"DIV",{slot:!0});var n=_(e);W(r.$$.fragment,n),n.forEach(c),this.h()},h(){i(e,"slot","content")},m(t,n){I(t,e,n),J(r,e,null),l=!0},p(t,n){const s={};n&269&&(s.$$scope={dirty:n,ctx:t}),r.$set(s)},i(t){l||(z(r.$$.fragment,t),l=!0)},o(t){L(r.$$.fragment,t),l=!1},d(t){t&&c(e),Q(r)}}}function Ke(o){let e,r;return e=new Ve({props:{$$slots:{content:[Le],default:[Ce]},$$scope:{ctx:o}}}),e.$on("change",o[7]),{c(){R(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,t){J(e,l,t),r=!0},p(l,[t]){const n={};t&269&&(n.$$scope={dirty:t,ctx:l}),e.$set(n)},i(l){r||(z(e.$$.fragment,l),r=!0)},o(l){L(e.$$.fragment,l),r=!1},d(l){Q(e,l)}}}function Ne(o,e,r){let l,t;X(o,Ie,m=>r(9,l=m));let{$$slots:n={},$$scope:s}=e;const u=ue("i18n");X(o,u,m=>r(3,t=m));let{onClose:a=()=>{}}=e,{knowledge:v=[]}=e,y=[];ve(()=>{let m=[...l.length>0?[{name:"All Documents",type:"collection",title:t.t("All Documents"),collection_names:l.map(p=>p.collection_name)}]:[],...l.reduce((p,h,x,f)=>{var D;return[...new Set([...p,...(((D=h==null?void 0:h.content)==null?void 0:D.tags)??[]).map(A=>A.name)])]},[]).map(p=>({name:p,type:"collection",collection_names:l.filter(h=>{var x;return(((x=h==null?void 0:h.content)==null?void 0:x.tags)??[]).map(f=>f.name).includes(p)}).map(h=>h.collection_name)}))];r(2,y=[...m,...l])});const E=m=>{v.find(p=>p.name===m.name)||r(0,v=[...v,{...m,type:(m==null?void 0:m.type)??"doc"}])},V=m=>{m.detail===!1&&a()};return o.$$set=m=>{"onClose"in m&&r(1,a=m.onClose),"knowledge"in m&&r(0,v=m.knowledge),"$$scope"in m&&r(8,s=m.$$scope)},[v,a,y,t,u,n,E,V,s]}class qe extends de{constructor(e){super(),he(this,e,Ne,Ke,ce,{onClose:1,knowledge:0})}}function oe(o,e,r){const l=o.slice();return l[5]=e[r],l[7]=r,l}function ae(o){let e,r=P(o[0]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ie(oe(o,r,t));return{c(){e=k("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=$(t,"DIV",{class:!0});var n=_(e);for(let s=0;s<l.length;s+=1)l[s].l(n);n.forEach(c),this.h()},h(){i(e,"class","flex items-center gap-2 mt-2")},m(t,n){I(t,e,n);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,n){if(n&3){r=P(t[0]);let s;for(s=0;s<r.length;s+=1){const u=oe(t,r,s);l[s]?l[s].p(u,n):(l[s]=ie(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(t){t&&c(e),fe(l,t)}}}function je(o){let e,r,l;return{c(){e=C("svg"),r=C("path"),l=C("path"),this.h()},l(t){e=H(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);r=H(n,"path",{d:!0}),_(r).forEach(c),l=H(n,"path",{d:!0}),_(l).forEach(c),n.forEach(c),this.h()},h(){i(r,"d","M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"),i(l,"d","M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-6")},m(t,n){I(t,e,n),d(e,r),d(e,l)},d(t){t&&c(e)}}}function Oe(o){let e,r,l;return{c(){e=C("svg"),r=C("path"),l=C("path"),this.h()},l(t){e=H(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=_(e);r=H(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(r).forEach(c),l=H(n,"path",{d:!0}),_(l).forEach(c),n.forEach(c),this.h()},h(){i(r,"fill-rule","evenodd"),i(r,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),i(r,"clip-rule","evenodd"),i(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"viewBox","0 0 24 24"),i(e,"fill","currentColor"),i(e,"class","size-6")},m(t,n){I(t,e,n),d(e,r),d(e,l)},d(t){t&&c(e)}}}function ie(o){var O,j;let e,r,l,t,n,s,u=(((O=o[5])==null?void 0:O.title)??`#${o[5].name}`)+"",a,v,y,E=o[1].t(((j=o[5])==null?void 0:j.type)??"Document")+"",V,m,p,h,x='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,D,A;function g(M,Z){var B;if((((B=M[5])==null?void 0:B.type)??"doc")==="doc")return Oe;if(M[5].type==="collection")return je}let w=g(o),b=w&&w(o);function F(){return o[3](o[7])}return{c(){e=k("div"),r=k("div"),l=k("div"),b&&b.c(),t=T(),n=k("div"),s=k("div"),a=K(u),v=T(),y=k("div"),V=K(E),m=T(),p=k("div"),h=k("button"),h.innerHTML=x,f=T(),this.h()},l(M){e=$(M,"DIV",{class:!0});var Z=_(e);r=$(Z,"DIV",{class:!0});var B=_(r);l=$(B,"DIV",{class:!0});var U=_(l);b&&b.l(U),U.forEach(c),t=S(B),n=$(B,"DIV",{class:!0});var G=_(n);s=$(G,"DIV",{class:!0});var Y=_(s);a=N(Y,u),Y.forEach(c),v=S(G),y=$(G,"DIV",{class:!0});var ee=_(y);V=N(ee,E),ee.forEach(c),G.forEach(c),B.forEach(c),m=S(Z),p=$(Z,"DIV",{class:!0});var te=_(p);h=$(te,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ye(h)!=="svelte-v6mhqq"&&(h.innerHTML=x),te.forEach(c),f=S(Z),Z.forEach(c),this.h()},h(){i(l,"class","p-2.5 bg-red-400 text-white rounded-lg"),i(s,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),i(y,"class","text-gray-500 text-sm"),i(n,"class","flex flex-col justify-center -space-y-0.5"),i(r,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none"),i(h,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),i(h,"type","button"),i(p,"class","absolute -top-1 -right-1"),i(e,"class","relative group")},m(M,Z){I(M,e,Z),d(e,r),d(r,l),b&&b.m(l,null),d(r,t),d(r,n),d(n,s),d(s,a),d(n,v),d(n,y),d(y,V),d(e,m),d(e,p),d(p,h),d(e,f),D||(A=Ee(h,"click",F),D=!0)},p(M,Z){var B,U;o=M,w!==(w=g(o))&&(b&&b.d(1),b=w&&w(o),b&&(b.c(),b.m(l,null))),Z&1&&u!==(u=(((B=o[5])==null?void 0:B.title)??`#${o[5].name}`)+"")&&q(a,u),Z&3&&E!==(E=o[1].t(((U=o[5])==null?void 0:U.type)??"Document")+"")&&q(V,E)},d(M){M&&c(e),b&&b.d(),D=!1,A()}}}function Ue(o){let e,r=o[1].t("Select Documents")+"",l;return{c(){e=k("button"),l=K(r),this.h()},l(t){e=$(t,"BUTTON",{class:!0,type:!0});var n=_(e);l=N(n,r),n.forEach(c),this.h()},h(){i(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl"),i(e,"type","button")},m(t,n){I(t,e,n),d(e,l)},p(t,n){n&2&&r!==(r=t[1].t("Select Documents")+"")&&q(l,r)},d(t){t&&c(e)}}}function Fe(o){let e,r,l,t=o[1].t("Knowledge")+"",n,s,u,a=o[1].t('To add documents here, upload them to the "Documents" workspace first.')+"",v,y,E,V,m,p,h,x,f=o[0].length>0&&ae(o);function D(g){o[4](g)}let A={$$slots:{default:[Ue]},$$scope:{ctx:o}};return o[0]!==void 0&&(A.knowledge=o[0]),p=new qe({props:A}),ke.push(()=>De(p,"knowledge",D)),{c(){e=k("div"),r=k("div"),l=k("div"),n=K(t),s=T(),u=k("div"),v=K(a),y=T(),E=k("div"),f&&f.c(),V=T(),m=k("div"),R(p.$$.fragment),this.h()},l(g){e=$(g,"DIV",{});var w=_(e);r=$(w,"DIV",{class:!0});var b=_(r);l=$(b,"DIV",{class:!0});var F=_(l);n=N(F,t),F.forEach(c),b.forEach(c),s=S(w),u=$(w,"DIV",{class:!0});var O=_(u);v=N(O,a),O.forEach(c),y=S(w),E=$(w,"DIV",{class:!0});var j=_(E);f&&f.l(j),V=S(j),m=$(j,"DIV",{class:!0});var M=_(m);W(p.$$.fragment,M),M.forEach(c),j.forEach(c),w.forEach(c),this.h()},h(){i(l,"class","self-center text-sm font-semibold"),i(r,"class","flex w-full justify-between mb-1"),i(u,"class","text-xs dark:text-gray-500"),i(m,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),i(E,"class","flex flex-col")},m(g,w){I(g,e,w),d(e,r),d(r,l),d(l,n),d(e,s),d(e,u),d(u,v),d(e,y),d(e,E),f&&f.m(E,null),d(E,V),d(E,m),J(p,m,null),x=!0},p(g,[w]){(!x||w&2)&&t!==(t=g[1].t("Knowledge")+"")&&q(n,t),(!x||w&2)&&a!==(a=g[1].t('To add documents here, upload them to the "Documents" workspace first.')+"")&&q(v,a),g[0].length>0?f?f.p(g,w):(f=ae(g),f.c(),f.m(E,V)):f&&(f.d(1),f=null);const b={};w&258&&(b.$$scope={dirty:w,ctx:g}),!h&&w&1&&(h=!0,b.knowledge=g[0],$e(()=>h=!1)),p.$set(b)},i(g){x||(z(p.$$.fragment,g),x=!0)},o(g){L(p.$$.fragment,g),x=!1},d(g){g&&c(e),f&&f.d(),Q(p)}}}function Ge(o,e,r){let l,{knowledge:t=[]}=e;const n=ue("i18n");X(o,n,a=>r(1,l=a));const s=a=>{t.splice(a,1),r(0,t)};function u(a){t=a,r(0,t)}return o.$$set=a=>{"knowledge"in a&&r(0,t=a.knowledge)},[t,l,n,s,u]}class tt extends de{constructor(e){super(),he(this,e,Ge,Fe,ce,{knowledge:0})}}export{tt as K};
//# sourceMappingURL=Knowledge.d272ec22.js.map
