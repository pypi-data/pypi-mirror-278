"use strict";(self.webpackChunk_aolney_jupyterlab_starchat_extension=self.webpackChunk_aolney_jupyterlab_starchat_extension||[]).push([[22],{22:(n,e,t)=>{t.r(e),t.d(e,{appendToHistory:()=>h,createWidget:()=>x,default:()=>v,sendUserInput:()=>f});var r=t(605),a=t(381),s=t(256);function o(n,e){return{schema:"scle060623",user_message:n,bot_response:e}}let i,d,c;function l(n){if(i){let e=window.location.href;d&&(e=d),window.fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,json:btoa(n)})}).then((n=>{n.ok||console.log(n.statusText)}))}}var g=t(650);const b=t.n(g)()(),m=document.createElement("div");m.className="container-div-starchat",m.innerHTML='<section class="msger">\n  <main id = "history_div" class="msger-chat">\n    <div class="msg left-msg">\n      <div class="msg-bubble">\n        <div class="msg-info">\n          <div class="msg-info-name">StarChat</div>\n        </div>\n\n        <div class="msg-text">\n          Welcome! Go ahead and send me a message. ðŸ˜„\n        </div>\n      </div>\n    </div>\n  </main>\n\n  <div class="msger-inputarea">\n    <textarea id = "user_input_starchat" rows="4" class="msger-input" placeholder="Enter your message..."></textarea>\n    <button id = "send_button_starchat" type="submit" class="msger-send-btn" onclick="sendUserInput_StarChat()">Send</button>\n  </div>\n</section>';const u="<style>:root {\n  --body-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n  --msger-bg: #fff;\n  --border: 2px solid #ddd;\n  --left-msg-bg: #ececec;\n  --right-msg-bg: #579ffb;\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  margin: 0;\n  padding: 0;\n  box-sizing: inherit;\n}\n\nbody {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-image: var(--body-bg);\n  font-family: Helvetica, sans-serif;\n}\n\n.container-div-starchat{\n    height: 100%\n}\n.msger {\n  display: flex;\n  flex-flow: column wrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  border: var(--border);\n  border-radius: 5px;\n  background: var(--msger-bg);\n  box-shadow: 0 15px 15px -5px rgba(0, 0, 0, 0.2);\n}\n\n.msger-header {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border-bottom: var(--border);\n  background: #eee;\n  color: #666;\n}\n\n.msger-chat {\n  flex: 1;\n  overflow-y: scroll;\n  padding: 10px;\n}\n.msger-chat::-webkit-scrollbar {\n  width: 10px;\n}\n.msger-chat::-webkit-scrollbar-track {\n  background: #ddd;\n}\n.msger-chat::-webkit-scrollbar-thumb {\n  background: #bdbdbd;\n}\n.msg {\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 10px;\n}\n.msg:last-of-type {\n  margin: 0;\n}\n.msg-img {\n  width: 50px;\n  height: 50px;\n  margin-right: 10px;\n  background: #ddd;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border-radius: 50%;\n}\n.msg-bubble {\n  max-width: 450px;\n  padding: 15px;\n  border-radius: 15px;\n  background: var(--left-msg-bg);\n}\n.msg-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n.msg-info-name {\n  margin-right: 10px;\n  font-weight: bold;\n}\n.msg-info-time {\n  font-size: 0.85em;\n}\n\n.left-msg .msg-bubble {\n  border-bottom-left-radius: 0;\n}\n\n.right-msg {\n  flex-direction: row-reverse;\n}\n.right-msg .msg-bubble {\n  background: var(--right-msg-bg);\n  color: #fff;\n  border-bottom-right-radius: 0;\n}\n.right-msg .msg-img {\n  margin: 0 0 0 10px;\n}\n\n.msger-inputarea {\n  display: flex;\n  padding: 10px;\n  border-top: var(--border);\n  background: #eee;\n}\n.msger-inputarea * {\n  padding: 10px;\n  border: none;\n  border-radius: 3px;\n  font-size: 1em;\n}\n.msger-input {\n  flex: 1;\n  background: #ddd;\n}\n.msger-send-btn {\n  margin-left: 10px;\n  background: rgb(0, 196, 65);\n  color: #fff;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background 0.23s;\n}\n.msger-wait-btn {\n  margin-left: 10px;\n  background: rgb(196, 49, 0);\n  color: #fff;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background 0.23s;\n}\n.msger-send-btn:hover {\n  background: rgb(0, 180, 50);\n}\n\n.msger-chat {\n  background-color: #fcfcfe;  \n}</style>",p={UserMessage:["StarChat","left"],BotMessage:["You","right"],ErrorMessage:["ERROR","left"]};function h(n,e){let[t,r]=p[e],a='<div class="msg #SIDE-msg">\n            <div class="msg-bubble">\n            <div class="msg-info">\n                <div class="msg-info-name">#NAME</div>\n            </div>\n            <div class="msg-text">#TEXT</div>\n            </div>\n        </div>'.replace("#NAME",t).replace("#SIDE",r).replace("#TEXT",n),s=document.getElementsByClassName("msger-chat")[0];s.insertAdjacentHTML("beforeend",a),s.scrollTop=s.scrollTop+500}function f(){var n,e;let t=null!==(e=null===(n=document.getElementById("user_input_starchat"))||void 0===n?void 0:n.nodeValue)&&void 0!==e?e:"";h(t,"UserMessage");let r=document.getElementById("send_button_starchat");var a;r.disabled=!0,r.className="msger-wait-btn",r.innerText="Wait",(a=t,c||"saturn.olney.ai"!=window.location.hostname?c||(c="UNDEFINED"):c="https://starchat.olney.ai/api/getBotResponse",window.fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:a})}).then((n=>{if(n.ok)return n.json();throw new Error("Failed to use StarChat service. Specific error is "+n.status)})).catch((n=>console.log("Error in call to StarChat service. Specific error is "+n)))).then((n=>{let e=n.bot_response;l(o(t,e)),h(b.render(e.replace("<|end|>","")),"BotMessage")})).catch((n=>{l(o(t,"SERVER_ERROR: "+n)),h("An error occurred when contacting StarChat. See your browser console for more information.","ErrorMessage"),console.log(n)})),r.disabled=!1,r.className="msger-send-btn",r.innerText="Send"}function x(){const n=new s.Widget,e=new a.MainAreaWidget({content:n});return e.id="jupyterlab_starchat_extension",e.title.label="StarChat Coding Assistant",e.title.closable=!0,n.node.appendChild(m),document.head.insertAdjacentHTML("beforeend",u),e}(window||t.g).sendUserInput_StarChat=f;const v={id:"@aolney/jupyterlab-starchat-extension:plugin",description:"A JupyterLab extension providing an interface to StarChat.",autoStart:!0,requires:[a.ICommandPalette,r.INotebookTracker],activate:(n,e)=>{console.log("JupyterLab extension @aolney/jupyterlab-starchat-extension is activated!");let t=x(),r="jupyterlab_starchat_extension:open";n.commands.addCommand(r,{label:"StarChat",execute:()=>{t.isAttached||n.shell.add(t,"main"),n.shell.activateById(t.id)}}),e.addItem({command:r,category:"Coding Assistants"});const a=new URLSearchParams(window.location.search);let s=a.get("id");s&&(function(n){d=n}(s),console.log("jupyterlab_starchat_extension: using id="+s+" for logging"));let o=a.get("log");o&&(i=o,console.log("jupyterlab_starchat_extension: using log="+o+" for logging"));let l=a.get("endpoint");l&&(c=l,console.log("jupyterlab_starchat_extension: using endpoint="+l+" for StarChat service"))}}}}]);